.TH wav2prg 1 "4th July, 1999"
.SH NAME
wav2prg \- convert Commodore 64 tapes to PC emulator files
.SH SYNOPSIS
wav2prg -h|-v
.P
wav2prg [-i] [-p|-d|-t file[.t64] [-n name]] [input .WAV file]
.SH DESCRIPTION
.I wav2prg
converts Commodore 64 tape files (in Turbo Tape 64 format), either directly
from the sound card (by default) or sampled into a .WAV file (if a .WAV
filename is specified), to PC emulator files (.PRG, .P00 or .T64). The default
format is .PRG. When converting to .PRG or .P00 files,
.I wav2prg
creates one .PRG or .P00 file for each Turbo Tape file it detects.
When converting to a .T64 file,
.I wav2prg
will convert all the files into a single .T64 file.
.P
If you want to convert to a .T64 file, you will need to specify the name
of the .T64 file on the command line. Optionally, you can also specify the
tape image's name with the
.B -n
option: if you don't, the default "GENERATED BY WAV2PRG" will be
used. Note that
.I wav2prg
cannot append files to an existing .T64 file: if the filename you specify
already exists, it will be overwritten.
.SH OPTIONS
.TP
.B -a
Enters adjust mode. In this mode,
.I wav2prg
will read the data from the sound card, and will ckeck if there are valid
Turbo Tape 64 bits. This option is useful for finding the right output volume
from the tape player. You can use the
.B -i
option along with
.B -a
.
.TP
.B -d
Disable auto-renaming for existing files. (see below). This only works when
converting to .PRG format.
.TP
.B -h
Show a help message and exit successfully.
.TP
.B -i
Tell
.I wav2prg
that the .WAV file or the sound coming from the sound card has an inverted
waveform. Some soundcards invert the signal when sampling, i.e. they turn
positive impulses into negative ones and vice versa. If the .WAV file or the
sound was generated with a such soundcard,
.I wav2prg
must be run with the
.B -i
option in order to detect the files. If you get no results without the
.B -i
option, try enabling it.
.TP
.B -n name
If used along with
.B -t
, this sets the internal T64 name to
.B name
.TP
.B -p
Convert to .P00 files. This option is obviously incompatible with
.B -t
.TP
.B -t file[.t64]
Convert to a .T64 file called
.B file.t64.
This option is obviously incompatible with
.B -p
.TP
.B -v
Show version and copyright info and exit successfully
.SH RULES FOR CHOOSING FILE NAMES
When converting to .P00, automatic renaming for existing files will be used.
The C64 name will be shrunk to 8 characters according to the PC64 rules. The
extension
.B .p00
will be added. If the file does not exist, it will be created. It if exists,
the extension will be replaced with
.B .p01
etc. If even the file with extension
.B .p99
exists, the file will be skipped. 
.P
When converting to .PRG, and the 
.B -d
option is not used, automatic renaming will be used too. The C64 name with
.B .prg
appended at the end will be tried first. If it does not exist, it will be
created. If it does, the C64 name with
.B _1.prg
will be tried etc. If even the file with
.B _99.prg
exists, the file will be skipped.
.P
When converting to .PRG, and the 
.B -d
option is used, the C64 name with
.B .prg
appended at the end will be tried first. If it does not exist, it will be
created. If it does,
.I wav2prg
will interactively ask "Overvrite, Rename, Skip [S]".
.I O
will overwrite the file,
.I R
will allow the user to choose another name (if that name exists too,
the message "Overvrite, Rename, Skip [S]" will appear again),
.I S
will skip the file.
.SH SYNTAX CHANGES BETWEEN VERSIONS 1.0 AND 1.1
The
.B -t
option syntax is incompatible between versions 1.0 and 1.1. In version 1.0,
the
.B -t
option accepted no arguments, and the .T64 filename should be provided
after the .WAV filename. In version 1.1, the .T64 filename is the argument of
the
.B -t
option. Besides, in version 1.0, the internal T64 name could be optionally
given after the .T64 filename, while in version 1.1 it can be given with
the option
.B -n
.SH AUTHORS
Fabrizio Gennari (fabrigennari@iol.it)
.P
Janne Veli Kujala (jvkujala@cc.jyu.fi)
.SH REFERENCES
.shc \N'32'
.I http://www.fairlight.to/docs/text/formats.zip
.shc
.IP
Peter Schepers' guide to Commodore 64 file formats
.PP
.shc \N'32'
.I ftp://ftp.funet.fi/pub/cbm/crossplatform/emulators/pc64/pc64e121.zip
.shc
.IP
The file T64TOP00.CPP contains the code for reducing a file name, according to
the PC64 rules.
.SH SEE ALSO
.B prg2wav
(1)
